{"remainingRequest":"/Users/kingvince/School/Web Programming/letsExercise/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kingvince/School/Web Programming/letsExercise/client/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kingvince/School/Web Programming/letsExercise/client/src/views/Login.vue","mtime":1543474219353},{"path":"/Users/kingvince/School/Web Programming/letsExercise/client/node_modules/cache-loader/dist/cjs.js","mtime":1543509510514},{"path":"/Users/kingvince/School/Web Programming/letsExercise/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kingvince/School/Web Programming/letsExercise/client/node_modules/cache-loader/dist/cjs.js","mtime":1543509510514},{"path":"/Users/kingvince/School/Web Programming/letsExercise/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import * as api from '@/services/api_access';\n    import axios from 'axios';\n    var array = new Array();\n    var userId = 0;\n    var files = null;\n    export default {\n        name: 'Lets Exercise!',\n        data () {\n            return {\n                ip: \"\",\n                input: {\n                    \n                },\n                response: \"\",\n                message: \"\",\n                photo: \"\",\n                userId: \"\",\n                file: \"\"\n            }\n        },\n        mounted() {\n            console.log(\"Current user id: \" + api.getUserId());\n            if(api.getUserId() != 0 && userId != 0){\n                this.getData();\n\n            }\n            // this.$http.get(\"https://httpbin.org/ip\").then(result => {\n            //     this.ip = result.body.origin;\n            // }, error => {\n            //     console.error(error);\n            // });\n        },\n        methods: {\n            getPhotos(userId){\n                var host = \"http://localhost:3000/getPhotos/\"+userId; \n              this.$http.post(host, {array}, { headers: { \"content-type\": \"application/json\" } }).then(result => {\n                \n                 var array = result.body\n                //  var finalArray = array.split(\",\");\n               \n                 this.photo = result.body;\n                    //console.log(array[1]);\n                \n                }, error => {\n                    console.error(error);\n                });\n\n                \n             \n            },\n              sendData() {\n                this.$http.post(\"http://localhost:3000/userLog\", this.input, { headers: { \"content-type\": \"application/json\" } }).then(result => {\n                    console.log(result.status);\n                    if(result.status == 204){\n                        alert(\"There is no user found under that name!\");\n                    }\n                    var res = result.data[0];\n                    this.response = \"Welcome Back \" + res.firstName + \"!\",\n                    this.message = res;\n                    var exArray = new Array();\n                    for(var i = 0; i < res.ExerciseList.length; i++){\n                        if(!this.isEmpty(res.ExerciseList[i])){\n                            exArray.push(res.ExerciseList[i]);\n                        }\n                    }\n                    this.exercises = exArray;\n                    this.pictureList = res.PhotoList;\n                    userId = res._id;\n                    console.log(userId);\n                    \n                    //array = res.PhotoList[0].fileName\n                    array = res.PhotoList[0].fileName;\n                    this.getPhotos(userId);\n                    api.saveId(userId);\n                    this.$cookie.set(\"userId\", keyValue, userId);\n                    \n                }, error => {\n                    console.error(error);\n                    \n                });\n                \n            },\n            getData(){\n                console.log(\"Function ran\");\n                var host = \"http://localhost:3000/userGet/\" + api.getUserId();\n                console.log(host);\n                this.$http.post(host, null, { headers: { \"content-type\": \"application/json\" } }).then(result => {\n                    var res = result;\n                    console.log(res);\n                    //this.response = \"Welcome Back \" + res.firstName + \"!\",\n                    this.message = res;\n                    var exArray = new Array();\n                    for(var i = 0; i < res.ExerciseList.length; i++){\n                        if(!this.isEmpty(res.ExerciseList[i])){\n                            exArray.push(res.ExerciseList[i]);\n                        }\n                    }\n                    this.exercises = exArray;\n                    this.pictureList = res.PhotoList;\n                    userId = res._id;\n                    console.log(userId);\n                    \n                    //array = res.PhotoList[0].fileName\n                    array = res.PhotoList[0].fileName;\n                    this.getPhotos(userId);\n                    api.saveId(userId);\n                    \n                }, error => {\n                    console.error(error);\n                    \n                });\n\n            },\n            sendExercise(){\n              var host = \"http://localhost:3000/exercise/\" + userId; \n              this.$http.post(host, this.input, { headers: { \"content-type\": \"application/json\" } }).then(result => {\n                  this.sendData();\n                  this.modal.close();\n              });\n            },\n            show () {\n                this.$modal.show('hello-world');\n            },\n            hide () {\n                this.$modal.hide('hello-world');\n            },\n             isEmpty(myObject) {\n                for(var key in myObject) {\n                    if (myObject.hasOwnProperty(key)) {\n                        return false;\n                    }   \n                }\n                return true;\n             },\n             showPictureModal(){\n                 this.$modal.show('picture-modal');\n                 var user = api.getUserId();\n                //  console.log(\"current user in modal: \" + user);\n               \n               \n             },\n             getId(){\n                 return userId;\n             },\n             setPost() {\n                 document.getElementById(\"picture-form\").action = \"http://localhost:3000/upload/\" + user;\t\t\t\t\n            },\n            deletePhoto(p){\n                var confirmmes = confirm(\"Do you want to delete this photo?\");\n                    if (confirmmes == true) {\n                        this.crudDelete(p);\n                    }\n            },\n            crudDelete(p){\n                var ob = {name: p}\n                var host = \"http://localhost:3000/deletePhoto/\" + userId; \n                this.$http.post(host, ob, { headers: { \"content-type\": \"application/json\" } }).this.sendData();\n            }\n                \n            \n        } \n}\n        \n    \n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"hello\">\n        <h1>Login to your account</h1>\n        <h3>Register <a href=\"/register\">Here </a>if you do not have an account</h3>\n        <input type=\"text\" name=\"firstName\" v-model=\"input.firstName\" placeholder=\"First Name\" required/>\n        <input type=\"text\" name=\"lastName\" v-model=\"input.lastName\" placeholder=\"Last Name\" required/>\n        <button v-on:click=\"sendData()\">Login</button>\n\n        <br />\n        <br />\n        <h3>{{response}} </h3>\n        <textarea >{{ message }}</textarea>\n        <h3> Logged Exercises <a @click.prevent=\"show()\" class=\"btn btn-sm btn-primary\">+</a></h3>\n        <ul class=\"list-group list-group-flush\">\n            <li v-for=\"e in exercises\" :key=\"e\"\n                class=\"list-group-item\">{{e}}</li>\n        </ul>\n        <h3> Uploaded Pictures  <a @click.prevent=\"showPictureModal()\" class=\"btn btn-sm btn-primary\">+</a></h3>\n        <!--<textarea>{{ pictureList }}</textarea> -->\n        <img :src=\"`${photo}`\" />\n        <ul class=\"list-group list-group-flush\" id=\"menu\">\n            <li>\n                <a  v-for=\"p in photo\" :key=\"p\"\n                    class=\"img-thumbnail\">\n                    <img :src=\"p\" v-on:click=\"deletePhoto(p)\" />\n                    \n                </a>\n           \n            </li>\n        </ul>\n        <!--- put forms in class modal-body -->\n        <modal name=\"hello-world\" class=\"modal-body\">\n            <div class=\"form-group\">\n                <label for=\"exampleInputEmail1\">Exercise Name</label>\n                <input type=\"text\" class=\"form-control\" id=\"exercisename\" v-model=\"input.name\" aria-describedby=\"exercise\" placeholder=\"Name of Exercise\" required>\n            </div>\n            <div class=\"form-group\">\n                <label for=\"exerciseDuration\">Duration</label>\n                <input type=\"text\" class=\"form-control\" id=\"exerciseDuration\" v-model=\"input.duration\" placeholder=\"Duration\" required>\n            </div>\n            <div class=\"form-group\">\n                <label for=\"exampleInputPassword1\">Date</label>\n                <input type=\"date\" class=\"form-control\" id=\"date\" v-model=\"input.Date\" placeholder=\"date\" required>\n            </div>\n            <button v-on:click=\"sendExercise()\" class=\"btn btn-primary\">Submit</button>\n        </modal>\n        <modal name=\"picture-modal\" id=\"picture-modal\" class=\"modal-body\">\n            <form id=\"picture-form\" action=\"http://localhost:3000/upload/\" method=\"post\" enctype=\"multipart/form-data\">\n                <div class=\"form-group\">  <label for=\"exampleInputFile\">CHOOSE FILE</label>  \n                    <input type=\"file\" name=\"photo\" required >\n                    <input type=\"hidden\" id=\"user\" name=\"userId\" value=\"\"></input>\n                    <p class=\"help-block\">Upload a picture</p>  \n                </div>\n                <button type=\"submit\" class=\"btn btn-primary\">Submit</button> \n            </form>\n        </modal>\n    </div>\n</template>\n\n<script>\n    import * as api from '@/services/api_access';\n    import axios from 'axios';\n    var array = new Array();\n    var userId = 0;\n    var files = null;\n    export default {\n        name: 'Lets Exercise!',\n        data () {\n            return {\n                ip: \"\",\n                input: {\n                    \n                },\n                response: \"\",\n                message: \"\",\n                photo: \"\",\n                userId: \"\",\n                file: \"\"\n            }\n        },\n        mounted() {\n            console.log(\"Current user id: \" + api.getUserId());\n            if(api.getUserId() != 0 && userId != 0){\n                this.getData();\n\n            }\n            // this.$http.get(\"https://httpbin.org/ip\").then(result => {\n            //     this.ip = result.body.origin;\n            // }, error => {\n            //     console.error(error);\n            // });\n        },\n        methods: {\n            getPhotos(userId){\n                var host = \"http://localhost:3000/getPhotos/\"+userId; \n              this.$http.post(host, {array}, { headers: { \"content-type\": \"application/json\" } }).then(result => {\n                \n                 var array = result.body\n                //  var finalArray = array.split(\",\");\n               \n                 this.photo = result.body;\n                    //console.log(array[1]);\n                \n                }, error => {\n                    console.error(error);\n                });\n\n                \n             \n            },\n              sendData() {\n                this.$http.post(\"http://localhost:3000/userLog\", this.input, { headers: { \"content-type\": \"application/json\" } }).then(result => {\n                    console.log(result.status);\n                    if(result.status == 204){\n                        alert(\"There is no user found under that name!\");\n                    }\n                    var res = result.data[0];\n                    this.response = \"Welcome Back \" + res.firstName + \"!\",\n                    this.message = res;\n                    var exArray = new Array();\n                    for(var i = 0; i < res.ExerciseList.length; i++){\n                        if(!this.isEmpty(res.ExerciseList[i])){\n                            exArray.push(res.ExerciseList[i]);\n                        }\n                    }\n                    this.exercises = exArray;\n                    this.pictureList = res.PhotoList;\n                    userId = res._id;\n                    console.log(userId);\n                    \n                    //array = res.PhotoList[0].fileName\n                    array = res.PhotoList[0].fileName;\n                    this.getPhotos(userId);\n                    api.saveId(userId);\n                    this.$cookie.set(\"userId\", keyValue, userId);\n                    \n                }, error => {\n                    console.error(error);\n                    \n                });\n                \n            },\n            getData(){\n                console.log(\"Function ran\");\n                var host = \"http://localhost:3000/userGet/\" + api.getUserId();\n                console.log(host);\n                this.$http.post(host, null, { headers: { \"content-type\": \"application/json\" } }).then(result => {\n                    var res = result;\n                    console.log(res);\n                    //this.response = \"Welcome Back \" + res.firstName + \"!\",\n                    this.message = res;\n                    var exArray = new Array();\n                    for(var i = 0; i < res.ExerciseList.length; i++){\n                        if(!this.isEmpty(res.ExerciseList[i])){\n                            exArray.push(res.ExerciseList[i]);\n                        }\n                    }\n                    this.exercises = exArray;\n                    this.pictureList = res.PhotoList;\n                    userId = res._id;\n                    console.log(userId);\n                    \n                    //array = res.PhotoList[0].fileName\n                    array = res.PhotoList[0].fileName;\n                    this.getPhotos(userId);\n                    api.saveId(userId);\n                    \n                }, error => {\n                    console.error(error);\n                    \n                });\n\n            },\n            sendExercise(){\n              var host = \"http://localhost:3000/exercise/\" + userId; \n              this.$http.post(host, this.input, { headers: { \"content-type\": \"application/json\" } }).then(result => {\n                  this.sendData();\n                  this.modal.close();\n              });\n            },\n            show () {\n                this.$modal.show('hello-world');\n            },\n            hide () {\n                this.$modal.hide('hello-world');\n            },\n             isEmpty(myObject) {\n                for(var key in myObject) {\n                    if (myObject.hasOwnProperty(key)) {\n                        return false;\n                    }   \n                }\n                return true;\n             },\n             showPictureModal(){\n                 this.$modal.show('picture-modal');\n                 var user = api.getUserId();\n                //  console.log(\"current user in modal: \" + user);\n               \n               \n             },\n             getId(){\n                 return userId;\n             },\n             setPost() {\n                 document.getElementById(\"picture-form\").action = \"http://localhost:3000/upload/\" + user;\t\t\t\t\n            },\n            deletePhoto(p){\n                var confirmmes = confirm(\"Do you want to delete this photo?\");\n                    if (confirmmes == true) {\n                        this.crudDelete(p);\n                    }\n            },\n            crudDelete(p){\n                var ob = {name: p}\n                var host = \"http://localhost:3000/deletePhoto/\" + userId; \n                this.$http.post(host, ob, { headers: { \"content-type\": \"application/json\" } }).this.sendData();\n            }\n                \n            \n        } \n}\n        \n    \n</script>\n\n<style scoped>\n    h1, h2 {\n        font-weight: normal;\n    }\n\n    ul {\n        list-style-type: none;\n        padding: 0;\n    }\n\n    li {\n        display: inline-block;\n        margin: 0 10px;\n    }\n\n    a {\n        color: #42b983;\n    }\n\n    textarea {\n        width: 600px;\n        height: 200px;\n    }\n</style>"]}]}